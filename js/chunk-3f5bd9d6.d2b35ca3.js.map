{"version":3,"sources":["webpack:///./src/components/Pagination.vue?d40e","webpack:///src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?7753","webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?3b6f","webpack:///./src/views/user/Products.vue?7b04","webpack:///src/views/user/Products.vue","webpack:///./src/views/user/Products.vue?d3d4","webpack:///./src/views/user/Products.vue","webpack:///./node_modules/core-js/modules/es.array.index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","pages","current_page","attrs","on","$event","preventDefault","updatePage","_v","_l","i","key","active","_s","total_pages","staticRenderFns","data","imageUrl","filePath","props","methods","$emit","num","component","isLoading","directives","name","rawName","value","input","expression","staticStyle","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","modifiers","domProps","composing","trim","$forceUpdate","product","id","category","title","content","price","origin_price","_f","arg","addToCart","status","loadingItem","_e","pagination","getProducts","components","Pagination","messages","temProduct","products","$http","post","url","quantity","get","api","created","computed","categoryFilter","item","titleFilter","indexOf","keyword","$","$indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","proto","forced","searchElement","apply","arguments","length","undefined"],"mappings":"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","file":"js/chunk-3f5bd9d6.d2b35ca3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"d-flex justify-content-center\"},[_c('ul',{staticClass:\"pagination\"},[_c('li',{staticClass:\"page-item\",class:{'disabled': _vm.pages.current_page === 1}},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\",\"aria-label\":\"Previous\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updatePage(_vm.pages.current_page - 1)}}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"«\")])])]),_vm._l((_vm.pages.total_pages),function(i){return _c('li',{key:i,staticClass:\"page-item\",class:{ active: _vm.pages.current_page === i }},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updatePage(i)}}},[_vm._v(_vm._s(i))])])}),_c('li',{staticClass:\"page-item\",class:{ 'disabled': _vm.pages.current_page === _vm.pages.total_pages }},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\",\"aria-label\":\"Next\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updatePage(_vm.pages.current_page + 1)}}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"»\")])])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <nav class=\"d-flex justify-content-center\">\r\n    <ul class=\"pagination\">\r\n      <li class=\"page-item\" :class=\"{'disabled': pages.current_page === 1}\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\"\r\n          @click.prevent=\"updatePage(pages.current_page - 1)\">\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\"\r\n        v-for=\"i in pages.total_pages\" :key=\"i\"\r\n        :class=\"{ active: pages.current_page === i }\">\r\n          <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(i)\">{{ i }}</a>\r\n      </li>\r\n      <li class=\"page-item\" :class=\"{ 'disabled': pages.current_page === pages.total_pages }\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"updatePage(pages.current_page + 1)\">\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      imageUrl: [],\r\n      filePath: ''\r\n    }\r\n  },\r\n  // 把外面的資料傳入\r\n  props: ['pages'],\r\n  // 切換頁\r\n  methods: {\r\n    updatePage (num) {\r\n      // 要知道點的是哪個，所以上面要帶上 -> updatePage(i) ，這裡用 num 接收\r\n      this.$emit('update', num)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page-item.disabled .page-link, .page-link {\r\n    background-color: transparent;\r\n}\r\n.page-item.active .page-link {\r\n  border: 1px solid #dee2e6;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pagination.vue?vue&type=template&id=4c6bce7a&scoped=true&\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js&\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Pagination.vue?vue&type=style&index=0&id=4c6bce7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c6bce7a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=style&index=0&id=4c6bce7a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pagination.vue?vue&type=style&index=0&id=4c6bce7a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-background\"},[_c('Loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"l-products container text-light mt-5\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"input-group col-10 col-md-5\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input.category),expression:\"input.category\"}],staticClass:\"form-control btn btn-secondary text-white\",staticStyle:{\"width\":\"35%\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.input, \"category\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"全部\")]),_c('option',[_vm._v(\"香精油\")]),_c('option',[_vm._v(\"蠟燭\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.input.title),expression:\"input.title\",modifiers:{\"trim\":true}}],staticClass:\"form-control btn btn-outline-secondary\",staticStyle:{\"width\":\"65%\"},attrs:{\"type\":\"text\",\"placeholder\":\"搜尋\"},domProps:{\"value\":(_vm.input.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.input, \"title\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"row mt-md-5 mt-3 mb-7 animation-scroll-section\",staticStyle:{\"min-height\":\"calc(100vh - 56px - 76px)\"}},_vm._l((_vm.titleFilter),function(product){return _c('div',{key:product.id,staticClass:\"col-md-4\"},[_c('div',{staticClass:\"card bg-transparent border-secondary mb-4 position-relative rounded-0\"},[_c('router-link',{staticClass:\"p-2\",attrs:{\"to\":(\"/product/\" + (product.id))}},[_c('span',{staticClass:\"badge badge-secondary badge-pill text-white position-absolute\",staticStyle:{\"left\":\"16px\",\"top\":\"16px\"}},[_vm._v(\" \"+_vm._s(product.category)+\" \")]),_c('img',{staticClass:\"card-img-top rounded-0\",attrs:{\"src\":product.imageUrl[0],\"alt\":\"...\"}}),_c('div',{staticClass:\"card-body p-0\"},[_c('h5',{staticClass:\"text-secondary mb-2 mt-2\"},[_vm._v(_vm._s(product.title))]),_c('p',{staticClass:\"card-text text-muted font-m mb-0\",staticStyle:{\"height\":\"2rem\"}},[_vm._v(_vm._s(product.content))]),(!product.price || product.price === product.origin_price)?_c('div',{staticClass:\"h6 letter-spacing-m mb-5\"},[_vm._v(\" \"+_vm._s(_vm._f(\"money\")(product.origin_price))+\" \")]):_c('div',{staticClass:\"mb-5\"},[_c('div',{staticClass:\"h6 text-muted letter-spacing-m mr-3\"},[_vm._v(\" \"+_vm._s(_vm._f(\"money\")(product.price))+\" \"),_c('span',{staticClass:\"font-s text-muted letter-spacing-m\"},[_vm._v(\" ( \"),_c('del',[_vm._v(\" \"+_vm._s(_vm._f(\"money\")(product.origin_price)))]),_vm._v(\" ) \")])])])])]),_c('div',{staticClass:\"position-absolute\",staticStyle:{\"font-size\":\"1.2rem\",\"right\":\"16px\",\"bottom\":\"10px\"}},[_c('a',{directives:[{name:\"tooltip\",rawName:\"v-tooltip:top\",value:('加到購物車'),expression:\"'加到購物車'\",arg:\"top\"}],staticClass:\"text-light\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addToCart(product.id)}}},[_c('i',{staticClass:\"fas fa-cart-plus\"}),(product.id === _vm.status.loadingItem)?_c('i',{staticClass:\"fas fa-spinner fa-spin\"}):_vm._e()])])],1)])}),0),_c('Pagination',{attrs:{\"pages\":_vm.pagination},on:{\"update\":_vm.getProducts}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"l-background\">\r\n    <Loading :active.sync=\"isLoading\"></Loading>\r\n    <div class=\"l-products container text-light mt-5\">\r\n      <div class=\"row justify-content-center\">\r\n        <div class=\"input-group col-10 col-md-5\">\r\n          <select\r\n            class=\"form-control btn btn-secondary text-white\"\r\n            style=\"width:35%\"\r\n            v-model=\"input.category\"\r\n          >\r\n            <option>全部</option>\r\n            <option>香精油</option>\r\n            <option>蠟燭</option>\r\n          </select>\r\n          <!-- trim -> 去頭尾空白 -->\r\n          <input v-model.trim=\"input.title\" type=\"text\" placeholder=\"搜尋\" class=\"form-control btn btn-outline-secondary\" style=\"width:65%\">\r\n        </div>\r\n      </div>\r\n      <div class=\"row mt-md-5 mt-3 mb-7 animation-scroll-section\" style=\"min-height: calc(100vh - 56px - 76px);\">\r\n        <div class=\"col-md-4\" v-for=\"product in titleFilter\" :key=\"product.id\">\r\n          <div class=\"card bg-transparent border-secondary mb-4 position-relative rounded-0\">\r\n            <router-link :to=\"`/product/${product.id}`\" class=\"p-2\">\r\n              <span\r\n                class=\"badge badge-secondary badge-pill text-white position-absolute\"\r\n                style=\"left: 16px; top: 16px\"\r\n              >\r\n              {{ product.category }}\r\n              </span>\r\n              <img :src=\"product.imageUrl[0]\" class=\"card-img-top rounded-0\" alt=\"...\">\r\n              <div class=\"card-body p-0\">\r\n                <h5 class=\"text-secondary mb-2 mt-2\">{{ product.title }}</h5>\r\n                <p class=\"card-text text-muted font-m mb-0\" style=\"height: 2rem\">{{ product.content }}</p>\r\n                <div class=\"h6 letter-spacing-m mb-5\" v-if=\"!product.price || product.price === product.origin_price\">\r\n                  {{ product.origin_price | money }}\r\n                  </div>\r\n                  <div v-else class=\"mb-5\">\r\n                    <div class=\"h6 text-muted letter-spacing-m mr-3\">\r\n                      {{ product.price | money }}\r\n                      <span class=\"font-s text-muted letter-spacing-m\">\r\n                        ( <del> {{ product.origin_price | money }}</del> )\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n              </div>\r\n            </router-link>\r\n            <!-- 之後再加我的最愛 -->\r\n            <!-- <a href=\"#\" class=\"text-light\">\r\n              <i class=\"far fa-heart position-absolute\" style=\"right: 16px; top: 16px\"></i>\r\n            </a> -->\r\n            <div class=\"position-absolute\" style=\"font-size:1.2rem; right: 16px; bottom: 10px\">\r\n              <a href=\"#\" class=\"text-light\" @click.prevent=\"addToCart(product.id)\" v-tooltip:top=\"'加到購物車'\">\r\n                <i class=\"fas fa-cart-plus\" ></i>\r\n                <i v-if=\"product.id === status.loadingItem\" class=\"fas fa-spinner fa-spin\"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Pagination :pages=\"pagination\" @update=\"getProducts\"></Pagination>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n/* global $ */\r\nimport Pagination from '@/components/Pagination.vue'\r\n\r\nexport default {\r\n  name: 'Products',\r\n  components: {\r\n    Pagination\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      messages: [\r\n        {\r\n          name: '失敗',\r\n          content: '出現錯誤'\r\n        },\r\n        {\r\n          name: '加入失敗 - 重複加入',\r\n          content: '已有這筆訂單在購物車'\r\n        },\r\n        {\r\n          name: '加入成功',\r\n          content: '已加入到購物車'\r\n        }\r\n      ],\r\n      temProduct: {\r\n        imageUrl: [] // 資料結構\r\n      },\r\n      products: [],\r\n      pagination: {},\r\n      input: {\r\n        category: '全部',\r\n        title: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addToCart (id) {\r\n      this.isLoading = true\r\n      this.status.loadingItem = id\r\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.$http.post(url, {\r\n        product: id,\r\n        quantity: 1\r\n      })\r\n        .then((res) => {\r\n          // $emit 推送資料\r\n          this.$bus.$emit('get-cart') // $bus.$on 定義的方法\r\n          this.status.loadingItem = ''\r\n          this.$bus.$emit('push-messages', this.messages[2])\r\n          $('.l-toast').toast('show')\r\n          this.isLoading = false\r\n        })\r\n        .catch(error => {\r\n          this.status.loadingItem = ''\r\n          // axios 固定的寫法，否則 error 訊息不會出現\r\n          console.log(error.response)\r\n          this.$bus.$emit('push-messages', this.messages[1])\r\n          $('.l-toast').toast('show')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getProducts (num = 1) { // 帶上分頁的參數 -> 第一種寫法\r\n      this.isLoading = true\r\n      // 防止 'url: \"https://course-ec-api.hexschool.io/api/289038e7-cea7-4a49-afd4-86ec766c3f7f/admin/ec/products?page=undefined\" ' --> 出現 undefined\r\n      // 第二種寫法：\r\n      // 如果 num 不存在，num = 1：\r\n      // if (!num) { num = 1 };\r\n      // 帶上分頁：\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products?page=${num}`\r\n      this.$http.get(api)\r\n        .then(res => {\r\n          // 對應遠端傳回來的資料\r\n          this.products = res.data.data\r\n          this.pagination = res.data.meta.pagination\r\n          // 如果 id 存在\r\n          if (this.temProduct.id) {\r\n            this.temProduct = {\r\n              imageUrl: [] // 資料結構\r\n            } // 把 temProduct 清除，避免重覆觸發\r\n          }\r\n          this.isLoading = false\r\n        })\r\n        .catch(() => {\r\n          this.$bus.$emit('push-messages', this.messages[0])\r\n          $('.l-toast').toast('show')\r\n          this.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  computed: {\r\n    categoryFilter () {\r\n      if (this.input.category !== '全部') { // 如果 input.category 不是全部\r\n        return this.products.filter(item => {\r\n          return item.category === this.input.category\r\n        })\r\n      } else {\r\n        return this.products\r\n      }\r\n    },\r\n    titleFilter () {\r\n      if (this.input.title) { // input.title 有資料的話\r\n        return this.categoryFilter.filter(item => {\r\n          // 先轉小寫 toLowerCase()\r\n          const content = item.title.toLowerCase()\r\n          const keyword = this.input.title.toLowerCase()\r\n          // 在陣列中找到的第一個元素索引值；沒找到則為 -1。\r\n          // 不等於 -1 -> 有找到資料，再進行比對\r\n          // 比對 keyword 跟 content的字串\r\n          return content.indexOf(keyword) !== -1\r\n        })\r\n      } else {\r\n        return this.categoryFilter\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Products.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Products.vue?vue&type=template&id=72dc514a&\"\nimport script from \"./Products.vue?vue&type=script&lang=js&\"\nexport * from \"./Products.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}