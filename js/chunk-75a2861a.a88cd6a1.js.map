{"version":3,"sources":["webpack:///./src/views/user/Checkout.vue?b1f4","webpack:///src/views/user/Checkout.vue","webpack:///./src/views/user/Checkout.vue?dd72","webpack:///./src/views/user/Checkout.vue","webpack:///./src/views/user/Checkout.vue?3c5c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","scopedSlots","_u","key","fn","ref","invalid","handleSubmit","_v","preventDefault","createOrder","errors","classes","directives","name","rawName","value","user","expression","class","domProps","target","composing","$set","_s","_e","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","item","product","id","staticStyle","imageUrl","title","quantity","_f","origin_price","price","discount","payment","cartTotal","staticRenderFns","data","tempProduct","products","carts","status","loadingItem","loadingUpdateCart","email","tel","address","message","messages","methods","updateTotal","forEach","getCart","$http","get","url","post","created","component"],"mappings":"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","file":"js/chunk-75a2861a.a88cd6a1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-checkout\"},[_c('Loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"pt-5 pb-7\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row justify-content-center flex-md-row flex-column-reverse\"},[_c('div',{staticClass:\"col-md-6\"},[_c('validation-observer',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar invalid = ref.invalid;\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('div',{staticClass:\"p-4 border \"},[_c('h4',{staticClass:\"font-weight-bold\"},[_vm._v(\"聯絡資料\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.createOrder)}}},[_c('div',{staticClass:\"form-group mb-2\"},[_c('validation-provider',{attrs:{\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{staticClass:\"text-muted mb-0\",attrs:{\"for\":\"ContactMail\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],staticClass:\"form-control rounded-0\",class:classes,attrs:{\"id\":\"ContactMail\",\"name\":\"email\",\"type\":\"email\",\"placeholder\":\"example@gmail.com\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}}),(errors[0])?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))]):_vm._e()]}}],null,true)})],1),_c('div',{staticClass:\"form-group mb-2\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{staticClass:\"text-muted mb-0\",attrs:{\"for\":\"ContactName\"}},[_vm._v(\"收件人姓名\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],staticClass:\"form-control rounded-0\",class:classes,attrs:{\"id\":\"ContactName\",\"name\":\"姓名\",\"type\":\"text\",\"placeholder\":\"王大明\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"name\", $event.target.value)}}}),(errors[0])?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))]):_vm._e()]}}],null,true)})],1),_c('div',{staticClass:\"form-group mb-4\"},[_c('validation-provider',{attrs:{\"rules\":\"required|min:10\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{staticClass:\"text-muted mb-0\",attrs:{\"for\":\"ContactPhone\"}},[_vm._v(\"收件人手機號碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.tel),expression:\"user.tel\"}],staticClass:\"form-control rounded-0\",class:classes,attrs:{\"id\":\"ContactPhone\",\"name\":\"手機號碼\",\"type\":\"tel\",\"placeholder\":\"0933-123-123\"},domProps:{\"value\":(_vm.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"tel\", $event.target.value)}}}),(errors[0])?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))]):_vm._e()]}}],null,true)})],1),_c('h4',{staticClass:\"font-weight-bold mb-2\"},[_vm._v(\"運送及付款資訊\")]),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{staticClass:\"text-muted mb-0\",attrs:{\"for\":\"ContactAddress\"}},[_vm._v(\"運送地址\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.address),expression:\"user.address\"}],staticClass:\"form-control rounded-0\",class:classes,attrs:{\"id\":\"ContactAddress\",\"name\":\"運送地址\",\"type\":\"tel\",\"placeholder\":\"地址\"},domProps:{\"value\":(_vm.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"address\", $event.target.value)}}}),(errors[0])?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))]):_vm._e()]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{staticClass:\"text-muted\",attrs:{\"for\":\"payment\"}},[_vm._v(\"付款方式\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.payment),expression:\"user.payment\"}],staticClass:\"form-control rounded-0\",class:classes,attrs:{\"id\":\"payment\",\"name\":\"付款方式\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.user, \"payment\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\",\"disabled\":\"\"}},[_vm._v(\" 請選擇付款方式 \")]),_c('option',{attrs:{\"value\":\"WebATM\"}},[_vm._v(\" WebATM \")]),_c('option',{attrs:{\"value\":\"ATM\"}},[_vm._v(\" ATM \")]),_c('option',{attrs:{\"value\":\"Credit\"}},[_vm._v(\" 信用卡 \")]),_c('option',{attrs:{\"value\":\"ApplePay\"}},[_vm._v(\" ApplePay \")]),_c('option',{attrs:{\"value\":\"GooglePay\"}},[_vm._v(\" GooglePay \")])]),(errors[0])?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))]):_vm._e()]}}],null,true)})],1),_c('button',{staticClass:\"btn btn-dark btn-block py-3 px-7 rounded-0\",attrs:{\"type\":\"submit\",\"disabled\":invalid}},[_vm._v(\"確定付款\")])])]),_c('router-link',{staticClass:\"text-light btn btn-dark btn-block py-3 mt-5 rounded-0\",attrs:{\"to\":\"/product\"}},[_c('i',{staticClass:\"fas fa-chevron-left mr-2\"}),_vm._v(\" 回訂單列表 \")])]}}])})],1),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"border p-4 mb-4\"},[_c('h4',{staticClass:\"mb-4 \"},[_vm._v(\"訂單資料\")]),_vm._l((_vm.carts),function(item){return _c('div',{key:item.product.id + 1,staticClass:\"d-flex mb-2\"},[_c('img',{staticClass:\"mr-2\",staticStyle:{\"width\":\"48px\",\"height\":\"48px\",\"object-fit\":\"cover\"},attrs:{\"src\":item.product.imageUrl,\"alt\":\"\"}}),_c('div',{staticClass:\"w-100\"},[_c('div',{staticClass:\"d-flex justify-content-between font-weight-bold\"},[_c('p',{staticClass:\"mb-0 font-weight-light\"},[_vm._v(_vm._s(item.product.title))]),_c('p',{staticClass:\"mb-0 font-weight-light\"},[_vm._v(\"x\"+_vm._s(item.quantity))])]),_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('p',{staticClass:\"text-muted mb-0\"},[_c('small',[_vm._v(_vm._s(_vm._f(\"money\")(item.product.origin_price)))])]),_c('p',{staticClass:\"mb-0\"},[_vm._v(_vm._s(_vm._f(\"money\")(item.product.price)))])])])])}),_c('table',{staticClass:\"table mt-4 border-top border-bottom text-muted\"},[_c('tbody',[_c('tr',[_c('th',{staticClass:\"border-0 px-0 pt-4 font-weight-normal\",attrs:{\"scope\":\"row\"}},[_vm._v(\"折扣\")]),_c('td',{staticClass:\"text-right border-0 px-0 pt-4\"},[_vm._v(_vm._s(_vm._f(\"money\")(_vm.discount)))])]),_c('tr',[_c('th',{staticClass:\"border-0 px-0 pt-0 pb-4 font-weight-normal\",attrs:{\"scope\":\"row\"}},[_vm._v(\"付款方式\")]),_c('td',{staticClass:\"text-right border-0 px-0 pt-0 pb-4\"},[_vm._v(_vm._s(_vm.user.payment))])])])]),_c('div',{staticClass:\"d-flex justify-content-between mt-4\"},[_c('p',{staticClass:\"mb-0 h4 font-weight-bold\"},[_vm._v(\"總計\")]),_c('p',{staticClass:\"mb-0 h4 font-weight-bold\"},[_vm._v(_vm._s(_vm._f(\"money\")(_vm.cartTotal)))])])],2)])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"l-checkout\">\r\n    <Loading :active.sync=\"isLoading\"></Loading>\r\n    <div class=\"pt-5 pb-7\">\r\n      <div class=\"container\">\r\n        <div class=\"row justify-content-center flex-md-row flex-column-reverse\">\r\n          <div class=\"col-md-6\">\r\n            <validation-observer v-slot=\"{ invalid, handleSubmit }\">\r\n              <div class=\"p-4 border \">\r\n                <h4 class=\"font-weight-bold\">聯絡資料</h4>\r\n                <form @submit.prevent=\"handleSubmit(createOrder)\">\r\n                  <div class=\"form-group mb-2\">\r\n                    <validation-provider rules=\"required|email\" v-slot=\"{ errors, classes }\">\r\n                      <label for=\"ContactMail\" class=\"text-muted mb-0\">Email</label>\r\n                      <input id=\"ContactMail\" name=\"email\" v-model=\"user.email\" type=\"email\" class=\"form-control rounded-0\" placeholder=\"example@gmail.com\" :class=\"classes\">\r\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                    </validation-provider>\r\n                  </div>\r\n                  <!-- <div class=\"form-group form-check\">\r\n                    <input type=\"checkbox\" class=\"form-check-input rounded-0\" id=\"ContactLorem\">\r\n                    <label class=\"form-check-label\" for=\"ContactLorem\">Lorem ipsum dolor sit amet, consetetur</label>\r\n                  </div> -->\r\n                  <div class=\"form-group mb-2\">\r\n                    <validation-provider rules=\"required\" v-slot=\"{ errors, classes }\">\r\n                      <label for=\"ContactName\" class=\"text-muted mb-0\">收件人姓名</label>\r\n                      <input id=\"ContactName\" name=\"姓名\" v-model=\"user.name\" type=\"text\" class=\"form-control rounded-0\" placeholder=\"王大明\" :class=\"classes\">\r\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                    </validation-provider>\r\n                  </div>\r\n                  <div class=\"form-group mb-4\">\r\n                    <validation-provider rules=\"required|min:10\" v-slot=\"{ errors, classes }\">\r\n                      <label for=\"ContactPhone\" class=\"text-muted mb-0\">收件人手機號碼</label>\r\n                      <input id=\"ContactPhone\" name=\"手機號碼\" v-model=\"user.tel\" type=\"tel\" class=\"form-control rounded-0\" placeholder=\"0933-123-123\" :class=\"classes\">\r\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                    </validation-provider>\r\n                  </div>\r\n                  <h4 class=\"font-weight-bold mb-2\">運送及付款資訊</h4>\r\n                  <div class=\"form-group\">\r\n                    <validation-provider rules=\"required\" v-slot=\"{ errors, classes }\">\r\n                      <label for=\"ContactAddress\" class=\"text-muted mb-0\">運送地址</label>\r\n                      <input id=\"ContactAddress\" name=\"運送地址\" v-model=\"user.address\" type=\"tel\" class=\"form-control rounded-0\" placeholder=\"地址\" :class=\"classes\">\r\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                    </validation-provider>\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <validation-provider rules=\"required\" v-slot=\"{ errors, classes }\">\r\n                      <label for=\"payment\" class=\"text-muted\">付款方式</label>\r\n                      <select id=\"payment\" name=\"付款方式\" v-model=\"user.payment\" class=\"form-control rounded-0\" :class=\"classes\">\r\n                        <option value=\"\" disabled>\r\n                          請選擇付款方式\r\n                        </option>\r\n                        <option value=\"WebATM\">\r\n                          WebATM\r\n                        </option>\r\n                        <option value=\"ATM\">\r\n                          ATM\r\n                        </option>\r\n                        <option value=\"Credit\">\r\n                          信用卡\r\n                        </option>\r\n                        <option value=\"ApplePay\">\r\n                          ApplePay\r\n                        </option>\r\n                        <option value=\"GooglePay\">\r\n                          GooglePay\r\n                        </option>\r\n                      </select>\r\n                      <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                    </validation-provider>\r\n                  </div>\r\n                  <!-- button 如果掛 function @:click=\"goPage ()\" 表單送出就會失效 -->\r\n                  <!-- 資料傳送事件在 form -->\r\n                  <button type=\"submit\" class=\"btn btn-dark btn-block py-3 px-7 rounded-0\" :disabled=\"invalid\">確定付款</button>\r\n                  <!-- <router-link to=\"/checkout-success\" class=\"btn btn-dark py-3 px-7 rounded-0\" :disabled=\"invalid\"></router-link> -->\r\n                </form>\r\n              </div>\r\n                <router-link to=\"/product\" class=\"text-light btn btn-dark btn-block py-3 mt-5 rounded-0\"><i class=\"fas fa-chevron-left mr-2\"></i> 回訂單列表 </router-link>\r\n            </validation-observer>\r\n          </div>\r\n          <div class=\"col-md-4\">\r\n            <div class=\"border p-4 mb-4\">\r\n              <h4 class=\"mb-4 \">訂單資料</h4>\r\n              <div class=\"d-flex mb-2\" v-for=\"item in carts\" :key=\"item.product.id + 1\">\r\n                <img :src=\"item.product.imageUrl\" alt=\"\" class=\"mr-2\" style=\"width: 48px; height: 48px; object-fit: cover\">\r\n                <div class=\"w-100\">\r\n                  <div class=\"d-flex justify-content-between font-weight-bold\">\r\n                    <p class=\"mb-0 font-weight-light\">{{ item.product.title }}</p>\r\n                    <p class=\"mb-0 font-weight-light\">x{{ item.quantity }}</p>\r\n                  </div>\r\n                  <div class=\"d-flex justify-content-between\">\r\n                    <p class=\"text-muted mb-0\"><small>{{ item.product.origin_price | money }}</small></p>\r\n                    <p class=\"mb-0\">{{ item.product.price | money }}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <table class=\"table mt-4 border-top border-bottom text-muted\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th scope=\"row\" class=\"border-0 px-0 pt-4 font-weight-normal\">折扣</th>\r\n                    <td class=\"text-right border-0 px-0 pt-4\">{{ discount | money }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\r\n                    <td class=\"text-right border-0 px-0 pt-0 pb-4\">{{ user.payment }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div class=\"d-flex justify-content-between mt-4\">\r\n                <p class=\"mb-0 h4 font-weight-bold\">總計</p>\r\n                <p class=\"mb-0 h4 font-weight-bold\">{{ cartTotal | money }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* global $ */\r\nexport default {\r\n  name: 'Checkout',\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      tempProduct: {},\r\n      products: [],\r\n      carts: [],\r\n      cartTotal: 0,\r\n      discount: 0,\r\n      status: {\r\n        loadingItem: '', // 要預先定義 loadingItem, 不然會出錯\r\n        loadingUpdateCart: ''\r\n      },\r\n      user: {\r\n        name: '',\r\n        email: '',\r\n        tel: '',\r\n        address: '',\r\n        payment: '',\r\n        message: ''\r\n      },\r\n      messages: [\r\n        {\r\n          name: '失敗',\r\n          content: '出現錯誤'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    updateTotal () {\r\n      // 累加總金額，先歸零後重新計算\r\n      this.cartTotal = 0\r\n      this.discount = 0\r\n      this.carts.forEach((item) => {\r\n        this.cartTotal += item.product.price * item.quantity\r\n        this.discount += (item.product.origin_price - item.product.price) * item.quantity\r\n      })\r\n    },\r\n    getCart () { // 取得購物車資料\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.carts = res.data.data\r\n          this.updateTotal()\r\n          // this.calculateDiscount() // 取得購物車的時候才會做計算\r\n          // 把購物車資料推送到 navbar 購物車 icon\r\n          this.$bus.$emit('get-cart')\r\n          this.isLoading = false\r\n        })\r\n        .catch(() => {\r\n          this.$bus.$emit('push-messages', this.messages[0])\r\n          $('.l-toast').toast('show')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    createOrder () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/orders`\r\n      this.$http.post(url, this.user)\r\n        .then((response) => {\r\n          if (response.data.data.id) {\r\n            // 跳出提示訊息\r\n            // $('#orderModal').modal('show')\r\n            // 重新渲染購物車\r\n            this.getCart()\r\n            this.$router.push({\r\n              path: `/checkout-success/${response.data.data.id}`\r\n            })\r\n            this.isLoading = false\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response.data.errors)\r\n          this.$bus.$emit('push-messages', this.messages[0])\r\n          $('.l-toast').toast('show')\r\n          this.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.updateTotal()\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.l-checkout{\r\n  padding-top: 6rem;\r\n  padding-bottom: 6rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout.vue?vue&type=template&id=075655ba&scoped=true&\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js&\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Checkout.vue?vue&type=style&index=0&id=075655ba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"075655ba\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=style&index=0&id=075655ba&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=style&index=0&id=075655ba&lang=scss&scoped=true&\""],"sourceRoot":""}